<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª{% endblock %}</title>
    
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    
    {% block extra_css %}{% endblock %}
</head>
<body class="theme-dark" id="body">
    <!-- –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –¢–ï–ú -->
    <div class="theme-switcher" onclick="toggleTheme()">
        <span class="theme-icon moon active">üåë</span>
        <div class="switch-track">
            <div class="switch-thumb"></div>
        </div>
        <span class="theme-icon sun">‚òÄÔ∏è</span>
    </div>

    <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    {% if current_user %}
    <nav class="navbar">
        <div class="nav-item {% if request.endpoint == 'index' %}active{% endif %}" onclick="location.href='{{ url_for('index') }}'">
            –ì–ª–∞–≤–Ω–∞—è
        </div>
        
        {% if current_user.role == 'student' %}
            <div class="nav-item {% if 'student' in request.endpoint %}active{% endif %}" onclick="location.href='{{ url_for('student.cabinet') }}'">
                –õ–ö–£
            </div>
        {% endif %}
        
        {% if current_user.role == 'parent' %}
            <div class="nav-item {% if 'parent' in request.endpoint %}active{% endif %}" onclick="location.href='{{ url_for('parent.cabinet') }}'">
                –õ–ö–†
            </div>
        {% endif %}
        
        <div class="nav-item {% if request.endpoint == 'rating' %}active{% endif %}" onclick="location.href='{{ url_for('main.rating') }}'">
            –†–µ–π—Ç–∏–Ω–≥
        </div>
        
        <div class="nav-item {% if request.endpoint == 'about' %}active{% endif %}" onclick="location.href='{{ url_for('main.about') }}'">
            –û –ø—Ä–µ–ø–æ–¥–µ
        </div>
        
        {% if current_user.role == 'admin' %}
            <div class="nav-item {% if 'admin' in request.endpoint %}active{% endif %}" onclick="location.href='{{ url_for('admin.dashboard') }}'">
                –ê–¥–º–∏–Ω
            </div>
        {% endif %}
        
        <div class="nav-item" onclick="location.href='{{ url_for('logout') }}'">
            –í—ã—Ö–æ–¥
        </div>
    </nav>
    {% endif %}

    <!-- –§–û–ù–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´ -->
    <div class="background-container" id="backgroundContainer">
        <!-- –ó–≤–µ–∑–¥—ã –∏ –æ–±–ª–∞–∫–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
    <main class="main-content">
        <!-- Flash —Å–æ–æ–±—â–µ–Ω–∏—è -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="notification notification-{{ category }}" id="flash-{{ loop.index }}">
                            {{ message }}
                            <span class="close-notification" onclick="hideNotification('flash-{{ loop.index }}')">&times;</span>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        {% block content %}{% endblock %}
    </main>

    <!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê -->
    {% include 'components/modals.html' %}

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/parallax.js') }}"></script>
    <script src="{{ url_for('static', filename='js/themes.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modals.js') }}"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>